<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV - Nguyễn Huỳnh Thanh Hải</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        .editable-input {
            background: transparent;
            border: none;
            border-bottom: 2px solid #1a73e8;
            color: inherit;
            font-size: inherit;
            font-family: inherit;
            width: 100%;
            padding: 5px 0;
            outline: none;
        }
        
        [contenteditable="true"]:hover {
            background: rgba(26, 115, 232, 0.1);
            cursor: pointer;
            padding: 2px 5px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="theme-controls">
        <button id="themeToggle" class="theme-btn">
            <i class="fas fa-moon"></i>
        </button>
        <select id="languageSelect" class="lang-select">
            <option value="vi">Tiếng Việt</option>
            <option value="en">English</option>
        </select>
    </div>
    <div class="container">
        <div class="cv-container">
            <div class="left-column">
                <div class="profile-image">
                    <input type="file" id="imageInput" accept="image/*" style="display: none;">
                    <img src="avatar.jpg" alt="Profile Picture" onclick="document.getElementById('imageInput').click()" style="width: 200px; height: 200px; border-radius: 50%; object-fit: cover; cursor: pointer;">
                </div>
                <script>
                    document.getElementById('imageInput').addEventListener('change', function(event) {
                        const file = event.target.files[0];
                        if (file) {
                            const reader = new FileReader();
                            reader.onload = function(e) {
                                document.querySelector('.profile-image img').src = e.target.result;
                            };
                            reader.readAsDataURL(file);
                        }
                    });
                </script>
                <div class="contact-info">
                    <h2>Thông tin liên hệ</h2>
                    <p><i class="fas fa-phone"></i> <span class="editable" data-key="phone">0123456789</span></p>
                    <p><i class="fas fa-envelope"></i> <span class="editable" data-key="email">example@email.com</span></p>
                    <p><i class="fas fa-map-marker-alt"></i> <span class="editable" data-key="address">TP.HCM, Việt Nam</span></p>
                </div>
                <div class="skills">
                    <h2>Kỹ năng</h2>
                    <div class="skill-item">
                        <span class="editable" data-key="skill1Name">HTML/CSS</span>
                        <div class="skill-level">
                            <div class="skill-bar editable" data-key="skill1Level" style="width: 70%"></div>
                        </div>
                    </div>
                    <div class="skill-item">
                        <span class="editable" data-key="skill2Name">JavaScript</span>
                        <div class="skill-level">
                            <div class="skill-bar editable" data-key="skill2Level" style="width: 55%"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="right-column">
                <div class="header">
                    <h1 class="editable" data-key="fullName">Nguyễn Huỳnh Thanh Hải</h1>
                    <h2 class="editable" data-key="title">Sinh viên năm 4</h2>
                </div>
                <div class="section">
                    <h2>Thông tin cá nhân</h2>
                    <p><strong>MSSV:</strong> <span class="editable" data-key="studentId">2180604560</span></p>
                    <p><strong>Ngày sinh:</strong> <span class="editable" data-key="dob">25-10-2002</span></p>
                    <p><strong>Trường:</strong> <span class="editable" data-key="university">Đại học HUTECH</span></p>
                </div>
                <div class="section">
                    <h2>Học vấn</h2>
                    <p><strong class="editable" data-key="educationPeriod">2021 - Hiện tại</strong></p>
                    <p class="editable" data-key="university">Đại học HUTECH</p>
                    <p>GPA : <span class="editable" data-key="gpa">3.39</span></p>
                    <p>Chuyên ngành: <span class="editable" data-key="major">Công nghệ thông tin</span></p>
                </div>
                <div class="section">
                    <h2>Mục tiêu nghề nghiệp</h2>
                    <p class="editable" data-key="careerObjective">Phát triển bản thân trong lĩnh vực công nghệ thông tin, đặc biệt là lập trình web.</p>
                </div>
            </div>
        </div>
    </div>
    <div class="hearts-container"></div>
    <div class="ending-screen">
        <div class="ending-message">❤️ Cảm ơn bạn đã xem CV của tôi! ❤️</div>
        <button class="restart-btn" onclick="restartAnimation()">Xem lại</button>
    </div>
</body>
<script>
const translations = {
    en: {
        title: "Contact Information",
        skills: "Skills",
        personalInfo: "Personal Information",
        education: "Education",
        career: "Career Objectives",
        studentId: "Student ID",
        dob: "Date of Birth",
        university: "University",
        major: "Major",
        present: "Present",
        fullName: "Full Name",
        title: "Title",
        educationPeriod: "Education Period",
        gpa: "GPA",
        careerObjective: "Career Objective",
        skill1Name: "Skill 1",
        skill2Name: "Skill 2"
    },
    vi: {
        title: "Thông tin liên hệ",
        skills: "Kỹ năng",
        personalInfo: "Thông tin cá nhân",
        education: "Học vấn",
        career: "Mục tiêu nghề nghiệp",
        studentId: "MSSV",
        dob: "Ngày sinh",
        university: "Trường",
        major: "Chuyên ngành",
        present: "Hiện tại",
        fullName: "Họ và tên",
        title: "Chức danh",
        educationPeriod: "Thời gian học",
        gpa: "GPA",
        careerObjective: "Mục tiêu nghề nghiệp",
        skill1Name: "Kỹ năng 1",
        skill2Name: "Kỹ năng 2"
    }
};

// Theme Toggle
const themeToggle = document.getElementById('themeToggle');
themeToggle.addEventListener('click', () => {
    document.body.classList.toggle('dark-theme');
    const icon = themeToggle.querySelector('i');
    if (document.body.classList.contains('dark-theme')) {
        icon.classList.replace('fa-moon', 'fa-sun');
    } else {
        icon.classList.replace('fa-sun', 'fa-moon');
    }
});

// Language Toggle
const languageSelect = document.getElementById('languageSelect');
languageSelect.addEventListener('change', (e) => {
    const lang = e.target.value;
    updateLanguage(lang);
});

function updateLanguage(lang) {
    document.querySelector('.contact-info h2').textContent = translations[lang].title;
    document.querySelector('.skills h2').textContent = translations[lang].skills;
    document.querySelector('.section h2').textContent = translations[lang].personalInfo;
    // Update other elements...
    document.querySelectorAll('.editable').forEach(element => {
        const key = element.getAttribute('data-key');
        const savedValue = localStorage.getItem(key);
        if (savedValue) {
            if (element.classList.contains('skill-bar')) {
                element.style.width = savedValue + '%';
            } else {
                element.textContent = savedValue;
            }
        }
    });
}

document.addEventListener('DOMContentLoaded', function() {
    // Khôi phục dữ liệu đã lưu
    const editables = document.querySelectorAll('.editable');
    editables.forEach(element => {
        const savedValue = localStorage.getItem(element.getAttribute('data-key'));
        if (savedValue) {
            element.textContent = savedValue;
        }
        makeEditable(element);
    });
    
    // Cập nhật hàm updateLanguage
    function updateLanguage(lang) {
        // ...existing translations...
        const editables = document.querySelectorAll('.editable');
        editables.forEach(element => {
            const key = element.getAttribute('data-key');
            const savedValue = localStorage.getItem(key);
            if (savedValue) {
                element.textContent = savedValue;
            }
        });
    }
});

function makeEditable(element) {
    element.addEventListener('click', function() {
        // Nếu là skill bar thì xử lý riêng
        if (element.classList.contains('skill-bar')) {
            const percentage = prompt('Nhập mức độ kỹ năng (0-100)%:', element.style.width.replace('%', ''));
            if (percentage !== null && !isNaN(percentage) && percentage >= 0 && percentage <= 100) {
                element.style.width = percentage + '%';
                localStorage.setItem(element.getAttribute('data-key'), percentage);
            }
            return;
        }

        const currentValue = this.textContent;
        const input = document.createElement('input');
        input.value = currentValue;
        input.className = 'editable-input';
        
        input.addEventListener('blur', function() {
            element.textContent = this.value;
            localStorage.setItem(element.getAttribute('data-key'), this.value);
        });
        
        input.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                this.blur();
            }
        });
        
        element.textContent = '';
        element.appendChild(input);
        input.focus();
    });
}

// Thay đổi các hàm liên quan đến trái tim
let heartCount = 0;
const maxHearts = 200; // Tăng số lượng tim tối đa
const visibleHearts = []; // Mảng lưu trữ các trái tim

// Thêm biến để theo dõi vị trí trái tim
const heartPositions = new Set();
const HEART_SIZE = 40; // Kích thước cơ bản của trái tim
const COLUMNS = 20; // Số cột để phân chia màn hình

function getAvailablePosition() {
    const viewportWidth = window.innerWidth;
    const columnWidth = viewportWidth / COLUMNS;
    
    // Tìm cột trống
    for (let i = 0; i < COLUMNS; i++) {
        const position = i * columnWidth;
        if (!heartPositions.has(Math.floor(position / columnWidth))) {
            heartPositions.add(Math.floor(position / columnWidth));
            return position;
        }
    }
    return null;
}

function createHeart() {
    if (heartCount >= maxHearts) {
        clearInterval(heartInterval);
        checkHeartsFilled();
        return;
    }

    const position = getAvailablePosition();
    if (position === null) return; // Không còn vị trí trống

    const heart = document.createElement('div');
    heart.className = 'heart';
    
    // Set position
    heart.style.left = `${position}px`;
    
    // Larger size và random size
    const size = Math.random() * 10 + HEART_SIZE; // 40-50px
    heart.style.width = size + 'px';
    heart.style.height = size + 'px';
    
    // Vibrant colors
    const colors = [
        '#ff0000', '#ff4081', '#e91e63', '#ff6b6b',
        '#ff3366', '#ff0066', '#ff0033', '#ff3399'
    ];
    const color = colors[Math.floor(Math.random() * colors.length)];
    heart.style.background = color;
    
    // Fast animation with column tracking
    const duration = Math.random() * 1 + 2; // 2-3 seconds
    heart.style.animation = `floatUp ${duration}s linear forwards`;
    
    document.querySelector('.hearts-container').appendChild(heart);
    visibleHearts.push(heart);
    heartCount++;

    // Xóa vị trí khỏi set khi trái tim đạt đến đỉnh
    setTimeout(() => {
        const column = Math.floor(position / (window.innerWidth / COLUMNS));
        heartPositions.delete(column);
    }, duration * 1000);
}

// Thêm hàm kiểm tra hearts filled
function checkHeartsFilled() {
    const viewportHeight = window.innerHeight;
    const heartsContainer = document.querySelector('.hearts-container');
    const hearts = heartsContainer.getElementsByClassName('heart');
    let filledHeight = 0;

    for (let heart of hearts) {
        const rect = heart.getBoundingClientRect();
        filledHeight = Math.max(filledHeight, viewportHeight - rect.top);
    }

    if (filledHeight >= viewportHeight * 0.8) { // 80% màn hình đã được lấp đầy
        setTimeout(explodeHearts, 500);
    }
}

// Thêm hiệu ứng tim mini cho nút restart
function createMiniHeart(button) {
    const heart = document.createElement('div');
    heart.className = 'mini-heart';
    
    // Random position around button
    const tx = (Math.random() - 0.5) * 100;
    const ty = (Math.random() - 0.5) * 100;
    heart.style.setProperty('--tx', `${tx}px`);
    heart.style.setProperty('--ty', `${ty}px`);
    
    // Random color
    const colors = ['#ff4081', '#e91e63', '#ff6b6b', '#ff3366'];
    heart.style.background = colors[Math.floor(Math.random() * colors.length)];
    
    // Set starting position
    heart.style.left = '50%';
    heart.style.top = '50%';
    
    // Add animation
    heart.style.animation = 'miniFloat 1s ease-out forwards';
    
    button.appendChild(heart);
    
    // Remove heart after animation
    setTimeout(() => heart.remove(), 1000);
}

// Thêm event listener cho nút restart
document.querySelector('.restart-btn').addEventListener('mouseover', function() {
    const createHeartInterval = setInterval(() => createMiniHeart(this), 100);
    this.addEventListener('mouseout', () => clearInterval(createHeartInterval), { once: true });
});

// Cập nhật interval tạo tim nhanh hơn
let heartInterval = setInterval(createHeart, 100); // Tạo tim mỗi 100ms

function explodeHearts() {
    // Dừng animation hiện tại của tất cả trái tim
    visibleHearts.forEach(heart => {
        heart.style.animation = 'explode 1.5s forwards';
    });
    
    // Show ending screen sau khi hiệu ứng nổ hoàn thành
    setTimeout(() => {
        document.querySelector('.ending-screen').classList.add('show');
    }, 1500);
}

function restartAnimation() {
    // Xóa tất cả tim cũ
    heartCount = 0;
    visibleHearts.length = 0;
    document.querySelector('.hearts-container').innerHTML = '';
    document.querySelector('.ending-screen').classList.remove('show');
    
    // Restart heart creation
    heartInterval = setInterval(createHeart, 100); // Tạo tim nhanh hơn
}

// Thêm animation explode mới

// Start initial animation
heartInterval = setInterval(createHeart, 200);
</script>
</html>